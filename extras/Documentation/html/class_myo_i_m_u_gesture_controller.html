<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>MyoIMUGestureController: MyoIMUGestureController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MyoIMUGestureController_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MyoIMUGestureController
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">This library provides gesture detection functionality using almost exclusively the IMU data of the Myo Armband.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_myo_i_m_u_gesture_controller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MyoIMUGestureController Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class provides gesture detection functionality.  
 <a href="class_myo_i_m_u_gesture_controller.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_myo_i_m_u_gesture_controller_8h_source.html">MyoIMUGestureController.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ae43f3936ed04e5c6d56598b90c6039dc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_myo_i_m_u_gesture_controller.html#ae43f3936ed04e5c6d56598b90c6039dc">begin</a> (MyoBridge &amp;myoBridge, void(*onGesture)(<a class="el" href="gesture_analysis_8h.html#a2a0c37051efa1205aa5aade68616c947">GestureType</a>), void(*onLockChange)(bool))</td></tr>
<tr class="memdesc:ae43f3936ed04e5c6d56598b90c6039dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the gesture controller.  <a href="#ae43f3936ed04e5c6d56598b90c6039dc">More...</a><br /></td></tr>
<tr class="separator:ae43f3936ed04e5c6d56598b90c6039dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class provides gesture detection functionality. </p>
<p>The gestures are based on arm rotation to work with persons where distinct muscle activity is hard to detect. Muscle activity is only used for starting/ending the recording of a gesture. Uses the MyoBridge Arduino Library (<a href="https://github.com/vroland/MyoBridge">https://github.com/vroland/MyoBridge</a>). NOTE: Use this class as "static" class. Use no or just one instance.</p>
<p>Example sketch: </p><div class="fragment"><div class="line"></div>
<div class="line"><span class="comment">//use serial debug messages</span></div>
<div class="line"><span class="preprocessor">#define DEBUG_SERIAL</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;MyoBridge.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;SoftwareSerial.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_myo_i_m_u_gesture_controller_8h.html">MyoIMUGestureController.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define LR_LED_PIN 6</span></div>
<div class="line"><span class="preprocessor">#define UD_LED_PIN 7</span></div>
<div class="line"><span class="preprocessor">#define LK_LED_PIN 8</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">  <span class="keywordtype">bool</span> up_active = <span class="keyword">false</span>;</div>
<div class="line">  <span class="keywordtype">bool</span> right_active = <span class="keyword">false</span>;</div>
<div class="line">} ControlStatus_t;</div>
<div class="line"></div>
<div class="line">ControlStatus_t controlStatus;</div>
<div class="line"></div>
<div class="line"><span class="comment">//SoftwareSerial connection to MyoBridge</span></div>
<div class="line">SoftwareSerial bridgeSerial(2,3);</div>
<div class="line"></div>
<div class="line"><span class="comment">//initialize MyoBridge object with software serial connection, provide reset pin</span></div>
<div class="line">MyoBridge bridge(bridgeSerial, 4);</div>
<div class="line"></div>
<div class="line"><span class="comment">//a function to inform us about the current state and the progess of the connection to the Myo.</span></div>
<div class="line"><span class="keywordtype">void</span> printConnectionStatus(MyoConnectionStatus status) {</div>
<div class="line">  </div>
<div class="line">  <span class="comment">//print the status constant as string</span></div>
<div class="line">  Serial.println(status);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a1c7eb2899938bae9e23d0ab315326b7c">updateControls</a>(<a class="code" href="gesture_analysis_8h.html#a2a0c37051efa1205aa5aade68616c947">GestureType</a> gesture) {</div>
<div class="line"></div>
<div class="line">  Serial.println(<a class="code" href="gesture_analysis_8cpp.html#a2517b8f49b4960fa25c8b337f96ac725">gestureToString</a>(gesture)); </div>
<div class="line">  bridge.vibrate(1); </div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (controlStatus.up_active &amp;&amp; (gesture == ARM_DOWN)) {</div>
<div class="line">   controlStatus.up_active = <span class="keyword">false</span>;</div>
<div class="line">  } </div>
<div class="line">  <span class="keywordflow">if</span> (controlStatus.right_active &amp;&amp; (gesture == ARM_LEFT)) {</div>
<div class="line">   controlStatus.right_active = <span class="keyword">false</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!controlStatus.right_active &amp;&amp; (gesture == ARM_UP)) {</div>
<div class="line">    controlStatus.up_active = <span class="keyword">true</span>; </div>
<div class="line">  } </div>
<div class="line">  <span class="keywordflow">if</span> (!controlStatus.up_active &amp;&amp; (gesture == ARM_RIGHT)) {</div>
<div class="line">    controlStatus.right_active = <span class="keyword">true</span>; </div>
<div class="line">  } </div>
<div class="line"></div>
<div class="line">  digitalWrite(<a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a1efc962937314bc92a2c30debfc9376d">UD_LED_PIN</a>, controlStatus.up_active);</div>
<div class="line">  digitalWrite(<a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a01a1139ec4d065d9bb92c82e80c13717">LR_LED_PIN</a>, controlStatus.right_active);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a949f65abdb3f1a84a11a6d5fdf6b0537">updateLockOutput</a>(<span class="keywordtype">bool</span> locked) {</div>
<div class="line">  digitalWrite(<a class="code" href="_myo_i_m_u_gesture_control_8ino.html#afd008f4a9873d09ebff59abec8bd6a19">LK_LED_PIN</a>, !locked);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="_myo_i_m_u_gesture_control_8ino.html#aa30770a4f1e0fb32e3ff71a2b4995c8a">pin_setup</a>() {</div>
<div class="line">  pinMode(<a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a01a1139ec4d065d9bb92c82e80c13717">LR_LED_PIN</a>, OUTPUT);</div>
<div class="line">  pinMode(<a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a1efc962937314bc92a2c30debfc9376d">UD_LED_PIN</a>, OUTPUT);</div>
<div class="line">  pinMode(<a class="code" href="_myo_i_m_u_gesture_control_8ino.html#afd008f4a9873d09ebff59abec8bd6a19">LK_LED_PIN</a>, OUTPUT);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line"></div>
<div class="line">  <span class="comment">//set pins as output</span></div>
<div class="line">  <a class="code" href="_myo_i_m_u_gesture_control_8ino.html#aa30770a4f1e0fb32e3ff71a2b4995c8a">pin_setup</a>();</div>
<div class="line">  </div>
<div class="line">  <span class="comment">//initialize both serial connections</span></div>
<div class="line">  Serial.begin(115200);</div>
<div class="line">  bridgeSerial.begin(115200);</div>
<div class="line"></div>
<div class="line">  <span class="comment">//wait until MyoBridge has found Myo and is connected. Make sure Myo is not connected to anything else and not in standby!</span></div>
<div class="line">  Serial.println(F(<span class="stringliteral">&quot;Searching for Myo...&quot;</span>));</div>
<div class="line">  <span class="comment">//initiate the connection with the status callback function</span></div>
<div class="line">  bridge.begin(printConnectionStatus);</div>
<div class="line">  </div>
<div class="line">  Serial.println(F(<span class="stringliteral">&quot;connected!&quot;</span>));</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="class_myo_i_m_u_gesture_controller.html#ae43f3936ed04e5c6d56598b90c6039dc">MyoIMUGestureController::begin</a>(bridge, <a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a1c7eb2899938bae9e23d0ab315326b7c">updateControls</a>, <a class="code" href="_myo_i_m_u_gesture_control_8ino.html#a949f65abdb3f1a84a11a6d5fdf6b0537">updateLockOutput</a>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  </div>
<div class="line">  <span class="comment">//update the connection to MyoBridge</span></div>
<div class="line">  bridge.update();</div>
<div class="line">}</div>
</div><!-- fragment --> </div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae43f3936ed04e5c6d56598b90c6039dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MyoIMUGestureController::begin </td>
          <td>(</td>
          <td class="paramtype">MyoBridge &amp;&#160;</td>
          <td class="paramname"><em>myoBridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="gesture_analysis_8h.html#a2a0c37051efa1205aa5aade68616c947">GestureType</a>)&#160;</td>
          <td class="paramname"><em>onGesture</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(bool)&#160;</td>
          <td class="paramname"><em>onLockChange</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the gesture controller. </p>
<p>This will change the parameters of the passed MyoBridge object: It will disable sleep, enable IMU and EMG data and set its own functions as callbacks. The MyoBridge object is also used to send commands like vibrations. Call after MyoBridge.connect()! you can define DEBUG_SERIAL to print sync instructions to hardware serial.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myoBridge</td><td>The MyoBridge object to use. </td></tr>
    <tr><td class="paramname">onGesture</td><td>Callback for gesture recognition </td></tr>
    <tr><td class="paramname">onLockChange</td><td>Callback for lock status changes</td></tr>
  </table>
  </dd>
</dl>
<p>This will change the parameters of the passed MyoBridge object: It will disable sleep, enable IMU and EMG data and set its own functions as callbacks. The MyoBridge object is also used to send commands like vibrations. Call after MyoBridge.connect()!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myoBridge</td><td>The MyoBridge object to use. </td></tr>
    <tr><td class="paramname">onGesture</td><td>Callback for gesture recognition </td></tr>
    <tr><td class="paramname">onLockChange</td><td>Callback for lock status changes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_myo_i_m_u_gesture_controller_8h_source.html">MyoIMUGestureController.h</a></li>
<li><a class="el" href="_myo_i_m_u_gesture_controller_8cpp.html">MyoIMUGestureController.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
